<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="carpoolSQL">
<!-- 	<select id="list" resultType="com.gogo.withgo.vo.CarpoolVo"> -->
<!-- 		select * from carpool -->
<!-- 		where category=#{category} -->
<!-- 		order by carno desc -->
<!-- 	</select> -->
	
<!-- 	<insert id="write"> -->
<!-- 		insert into carpool(carno, category, mno, usertype, departure, arrival, seat, memo) -->
<!-- 		values(car_seq.nextval, #{category}, #{mno}, #{usertype}, #{departure}, #{arrival}, #{seat}, #{memo}) -->
<!-- 	</insert> -->
	
	<select id="carpoolList" resultType="com.gogo.withgo.vo.CarpoolMemberVo">
		select C.*, M.* 
		from carpool C, member M
		where C.mno = M.mno
		and category=#{category}
		order by carno desc
	</select>
	
	<select id="read" resultType="com.gogo.withgo.vo.CarpoolMemberVo">
		select C.*, M.*
		from carpool C, member M
		where C.mno = M.mno 
		and carno=#{carno}
	</select>
	
	<insert id="addBookMark">
		insert into bookmark(bmno, mno, carno)
		values(bm_seq.nextval, #{mno}, #{carno})
	</insert>
	
	<delete id="delBookMark">
		delete from bookmark
		where mno=#{mno} and carno=#{carno}
	</delete>
	
	<select id="getBookMarks" resultType="com.gogo.withgo.vo.BookmarkInfoVo">
		select BM.*, M.*, C.*
		from bookmark BM, member M, carpool C
		where BM.carno = C.carno
		and C.mno = M.mno
		and BM.mno=#{mno}
	</select>
</mapper>